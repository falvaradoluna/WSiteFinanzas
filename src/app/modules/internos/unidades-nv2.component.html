
<div *ngIf='idDetalleUnidades === 1' class="row justify-content-center">
    <div *ngIf='isNivel4' class="scrolltable">
        <table id="detalleUnidadesSeriesTable" class="table table-sm table-bordered table-responsive table-double-scroll"
        sortable-table (sorted)="onSorted($event, detalleUnidadesSeries)"> <!-- LAGP -->
          <thead>
            <tr>
              <th class="bg-secondary text-white">Modelo</th>
              <th class="bg-secondary text-white">Status</th>
              <th class="bg-secondary text-white">IdCliente</th>
              <th class="bg-secondary text-white min-width-220">Nombre</th>
              <th class="bg-secondary text-white">RFC</th>
              <th class="bg-secondary text-white min-width-220">Vendedor</th>
              <th class="bg-secondary text-white">Pedido</th>
              <th class="bg-secondary text-white">Factura</th>
              <th class="bg-secondary text-white" sortable-column='InventarioNumero'>#_Inventario</th>
              <th class="bg-secondary text-white">Serie</th>
              <th class="bg-secondary text-white" sortable-column='precioBase'>Precio_Base</th>
              <th class="bg-secondary text-white">Isan</th>
              <th class="bg-secondary text-white" sortable-column='ivaPorcentaje'>%_IVA</th>
              <th class="bg-secondary text-white" sortable-column='ivaImporte'>IVA</th>
              <th class="bg-secondary text-white" sortable-column='importeTotal'>Importe Total</th>
              <th class="bg-secondary text-white" sortable-column='costo'>Costo Compra</th>
              <th class="bg-secondary text-white" sortable-column='incentivo'>Incentivo</th>
              <th class="bg-secondary text-white" sortable-column='costoTotal'>Total Compra</th>
              <th class="bg-secondary text-white" sortable-column='utilidad'>Utilidad</th>
              <th class="bg-secondary text-white" sortable-column='cantidad'>Cantidad</th>
              <!-- <th>% Utilidad</th> -->
            </tr>
          </thead>
          <tbody>
            <tr *ngFor='let dus of detalleUnidadesSeries'>
              <td>{{ dus.unidadYear }}</td>
              <td>{{ dus.estatus }}</td>
              <td>{{ dus.idCliente }}</td>
              <td>{{ dus.clienteRazonSocial }}</td>
              <td>{{ dus.clienteRFC }}</td>
              <td>{{ dus.vendedor }}</td>
              <td>{{ dus.pedido }}</td>
              <td>{{ dus.factura }}</td>
              <td>{{ dus.InventarioNumero }}</td>
              <td>{{ dus.serieNumero }}</td>
              <td class="text-right" [suma-columnas]='dus.precioBase'>{{ dus.precioBase | number:'1.2-2' }}</td>
              <td class="text-right" [suma-columnas]='dus.impuestoISAN'>{{ dus.impuestoISAN | number:'1.2-2' }}</td>
              <td class="text-right" [suma-columnas]='dus.ivaPorcentaje'>{{ dus.ivaPorcentaje | number:'1.0-2' }}</td>
              <td class="text-right" [suma-columnas]='dus.ivaImporte'>{{ dus.ivaImporte | number:'1.2-2' }}</td>
              <td class="text-right" [suma-columnas]='dus.importeTotal'>{{ dus.importeTotal | number:'1.2-2' }}</td>
              <td class="text-right" [suma-columnas]='dus.costo'>{{ dus.costo | number:'1.2-2' }}</td>
              <td class="text-right" [suma-columnas]='dus.incentivo'>{{ dus.incentivo | number:'1.2-2' }}</td>
              <td class="text-right" [suma-columnas]='dus.costoTotal'>{{ dus.costoTotal | number:'1.2-2' }}</td>
              <td class="text-right" [suma-columnas]='dus.utilidad'>{{ dus.utilidad | number:'1.2-2' }}</td>
              <td class="text-right" [suma-columnas]='dus.cantidad'>{{ dus.cantidad | number:'1.0-2' }}</td>
            </tr>
          </tbody>
        </table>
      </div> 
  <div *ngIf='!isNivel4 && (selectedIdDepartamento != 738 && selectedIdDepartamento != 742 && selectedIdDepartamento != 16)' class="col-md-6">
    <table class="table table-sm table-bordered table-hover-td" sortable-table (sorted)="onSorted($event, detalleUnidadesMensual)">
      <thead>
        <tr>
          <!-- Flotillas tiene una columna extra (Depto) -->
          <th *ngIf='idOrigen === 3' class="bg-secondary text-white">Depto</th>
          <th class="bg-secondary text-white">CarLine</th>
          <th class="bg-secondary text-white text-center" sortable-column='cantidad'>Cantidad</th>
          <th *ngIf='showPercents' class="bg-secondary text-white text-center" sortable-column='Perc'>%</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor='let d of detalleUnidadesMensual; let i = index;' (dblclick)='onClickDetalleUnidadesMensual(d.idAutoLinea,d.autoLinea, "", d.departamentoOri)'>
          <td *ngIf='idOrigen === 3'>{{ d.departamento }}</td>
          <td>{{ d.autoLinea }}</td>
          <td class="text-center" [suma-columnas]='d.cantidad'>{{ d.cantidad }}</td>
          <td *ngIf='showPercents' class="text-right" [suma-columnas]='d.Perc'>{{ d.Perc | number: '1.2-2' }}</td>
        </tr>
      </tbody>
    </table>
  </div>
  
  <div *ngIf='idDetalleUnidades === 1 && (selectedIdDepartamento != 738 && selectedIdDepartamento == 742 || selectedIdDepartamento == 16)' class="scrolltable">
    <div class="scrolltable">
      <table class="table table-sm table-bordered table-responsive table-double-scroll" id="idDetalleUnidadesTipo" sortable-table (sorted)="onSorted($event, detalleUnidadesTipo)">
        <thead>
          <tr>
            <th class="bg-secondary text-white">Factura</th>
            <th class="bg-secondary text-white">Fecha Factura</th>
            <th class="bg-secondary text-white">Status</th>
            <th class="bg-secondary text-white">Orden</th>
            <th class="bg-secondary text-white">FechaOrden</th>
            <th class="bg-secondary text-white min-width-120">TipoOrden</th>
            <th class="bg-secondary text-white min-width-130">Id Cliente Orden</th>
            <th class="bg-secondary text-white min-width-130">Id Cliente Factura</th>
            <th class="bg-secondary text-white min-width-220">Nombre</th>
            <th class="bg-secondary text-white min-width-120">RFC</th>
            <th class="bg-secondary text-white">QTYSurt</th>
            <th class="bg-secondary text-white">Tiempo</th>
            <th class="bg-secondary text-white">CostoMO</th>
            <th class="bg-secondary text-white">CostoRE</th>
            <th class="bg-secondary text-white">CostoTT</th>
            <th class="bg-secondary text-white">CostoOT</th>
            <th class="bg-secondary text-white">CostoTOT</th>
            <th class="bg-secondary text-white">VentaMO</th>
            <th class="bg-secondary text-white">VentaRE</th>
            <th class="bg-secondary text-white">VentaTT</th>
            <th class="bg-secondary text-white">VentaOT</th>
            <th class="bg-secondary text-white">VentaDescto</th>
            <th class="bg-secondary text-white">VentaSubtotal</th>
            <th class="bg-secondary text-white">VentaIVA</th>
            <th class="bg-secondary text-white">VentaTOT</th>
            <th class="bg-secondary text-white">Utilidad</th>
            <th class="bg-secondary text-white min-width-220">Asesor</th>
            <th class="bg-secondary text-white min-width-120">FechaPromesa</th>
            <th class="bg-secondary text-white min-width-120">MotivoCancel</th>
            <th class="bg-secondary text-white min-width-120">Catalogo</th>
            <th class="bg-secondary text-white min-width-120">Serie</th>
            <th class="bg-secondary text-white min-width-120">Marca</th>
            <th class="bg-secondary text-white">Año</th>
            <th class="bg-secondary text-white min-width-120">Modelo</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor='let d of detalleUnidadesTipoOtros; let i = index;'>
            <td>{{ d.factura }}</td>
            <td>{{ d.fechaFactura }}</td>
            <td>{{ d.status }}</td>
            <td>{{ d.orden }}</td>
            <td>{{ d.fechaOrden }}</td>
            <td>{{ d.tipoOrden }}</td>
            <td>{{ d.idClienteOrden }}</td>
            <td>{{ d.idClienteFactura }}</td>
            <td>{{ d.nombre }}</td>
            <td>{{ d.rfc }}</td>
            <td>{{ d.qtySurt | number:'1.2-2' }}</td>
            <td>{{ d.tiempo }}</td>
            <td>{{ d.costoMO | number:'1.2-2' }}</td>
            <td>{{ d.costoRE | number:'1.2-2' }}</td>
            <td>{{ d.costoTT | number:'1.2-2' }}</td>
            <td>{{ d.costoOT | number:'1.2-2' }}</td>
            <td>{{ d.costoTOT | number:'1.2-2' }}</td>
            <td>{{ d.ventaMO | number:'1.2-2' }}</td>
            <td>{{ d.ventaRE | number:'1.2-2' }}</td>
            <td>{{ d.ventaTT | number:'1.2-2' }}</td>
            <td>{{ d.ventaOT | number:'1.2-2' }}</td>
            <td>{{ d.ventaDescto | number:'1.2-2' }}</td>
            <td>{{ d.ventaSubtotal | number:'1.2-2' }}</td>
            <td>{{ d.ventaIVA | number:'1.2-2' }}</td>
            <td>{{ d.ventaTOT | number:'1.2-2' }}</td>
            <td>{{ d.utilidad | number:'1.2-2' }}</td>
            <td>{{ d.asesor }}</td>
            <td>{{ d.fechaPromesa }}</td>
            <td>{{ d.motivoCancel }}</td>
            <td>{{ d.catalogo }}</td>
            <td>{{ d.serie }}</td>
            <td>{{ d.marca }}</td>
            <td>{{ d.anio }}</td>
            <td>{{ d.modelo }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div *ngIf='idDetalleUnidades === 1 && selectedIdDepartamento == 738' class="scrolltable">
    <div class="scrolltable">
      <table class="table table-sm table-bordered table-responsive table-double-scroll" id="idDetalleUnidadesTipo" sortable-table (sorted)="onSorted($event, detalleUnidadesTipo)">
        <thead>
          <tr>
            <th class="bg-secondary text-white">Código</th>
            <th class="bg-secondary text-white min-width-250">Descripción</th>
            <th class="bg-secondary text-white min-width-200">Vendedor</th>
            <th class="bg-secondary text-white">Cantidad</th>
            <th class="bg-secondary text-white">Precio</th>
            <th class="bg-secondary text-white">Costo</th>
            <th class="bg-secondary text-white min-width-120">Precio Total</th>
            <th class="bg-secondary text-white min-width-130">costo Total</th>
            <th class="bg-secondary text-white min-width-130">I.V.A</th>
            <th class="bg-secondary text-white min-width-120">Total</th>
            <th class="bg-secondary text-white min-width-120">Utilidad</th>
            <th class="bg-secondary text-white min-width-250">Movimiento</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor='let d of detalleUnidadesRefacciones; let i = index;'>
            <td>{{ d.codigo }}</td>
            <td>{{ d.descripcion }}</td>
            <td>{{ d.vendedor }}</td>
            <td>{{ d.cantidad }}</td>
            <td>{{ d.precio }}</td>
            <td>{{ d.costo }}</td>
            <td>{{ d.precioTotal }}</td>  
            <td>{{ d.costoTotal }}</td>
            <td>{{ d.iva }}</td>
            <td>{{ d.total }}</td>
            <td>{{ d.utilidad }}</td>
            <td>{{ d.movimiento }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

</div>

<table id="idDetalleUnidadesAcumulado" *ngIf='idDetalleUnidades === 2' class="table table-sm table-bordered table-responsive table-hover-td table-double-scroll"
  sortable-table (sorted)="onSorted($event, detalleUnidadesAcumulado)">
  <thead>
    <tr>
      <th *ngIf='idOrigen === 3' class="bg-secondary text-white min-width-220">Depto</th>
      <th class="bg-secondary text-white min-width-135">CarLine</th>
      <th class="bg-secondary text-white" sortable-column='enero'>ENE</th>
      <th *ngIf='showPercents' class="bg-secondary text-white text-center"> % </th>
      <th *ngIf='mes >= "02"' class="bg-secondary text-white" sortable-column='febrero'>FEB</th>
      <th *ngIf='mes >= "02" && showPercents' class="bg-secondary text-white text-center"> % </th>
      <th *ngIf='mes >= "03"' class="bg-secondary text-white" sortable-column='marzo'>MAR</th>
      <th *ngIf='mes >= "03" && showPercents' class="bg-secondary text-white text-center"> % </th>
      <th *ngIf='mes >= "04"' class="bg-secondary text-white" sortable-column='abril'>ABR</th>
      <th *ngIf='mes >= "04" && showPercents' class="bg-secondary text-white text-center"> % </th>
      <th *ngIf='mes >= "05"' class="bg-secondary text-white" sortable-column='mayo'>MAY</th>
      <th *ngIf='mes >= "05" && showPercents' class="bg-secondary text-white text-center"> % </th>
      <th *ngIf='mes >= "06"' class="bg-secondary text-white" sortable-column='junio'>JUN</th>
      <th *ngIf='mes >= "06" && showPercents' class="bg-secondary text-white text-center"> % </th>
      <th *ngIf='mes >= "07"' class="bg-secondary text-white" sortable-column='julio'>JUL</th>
      <th *ngIf='mes >= "07" && showPercents' class="bg-secondary text-white text-center"> % </th>
      <th *ngIf='mes >= "08"' class="bg-secondary text-white" sortable-column='agosto'>AGO</th>
      <th *ngIf='mes >= "08" && showPercents' class="bg-secondary text-white text-center"> % </th>
      <th *ngIf='mes >= "09"' class="bg-secondary text-white" sortable-column='septiembre'>SEP</th>
      <th *ngIf='mes >= "09" && showPercents' class="bg-secondary text-white text-center"> % </th>
      <th *ngIf='mes >= "10"' class="bg-secondary text-white" sortable-column='octubre'>OCT</th>
      <th *ngIf='mes >= "10" && showPercents' class="bg-secondary text-white text-center"> % </th>
      <th *ngIf='mes >= "11"' class="bg-secondary text-white" sortable-column='noviembre'>NOV</th>
      <th *ngIf='mes >= "11" && showPercents' class="bg-secondary text-white text-center"> % </th>
      <th *ngIf='mes >= "12"' class="bg-secondary text-white" sortable-column='diciembre'>DIC</th>
      <th *ngIf='mes >= "12" && showPercents' class="bg-secondary text-white text-center"> % </th>
      <th class="bg-secondary text-white" sortable-column='totalAnual'>TOTAL</th>
      <th *ngIf='showPercents' class="bg-secondary text-white text-center"> % </th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor='let dua of detalleUnidadesAcumulado; let i = index;'>
      <td *ngIf='idOrigen === 3'>{{ dua.departamento }}</td>
      <td>{{ dua.autoLinea }}</td>
      <td class="text-center" (dblclick)='onClickDetalleUnidadesMensual(dua.idAutoLinea ,dua.autoLinea, 1, dua.departamentoOri)' [suma-columnas]='dua.enero'>{{ dua.enero }}</td>
      <td *ngIf='showPercents' class="text-right"  [suma-columnas]='dua.eneroPerc'>{{ dua.eneroPerc | number:'1.2-2' }}</td>
      <td *ngIf='mes >= "02"'  class="text-center" (dblclick)='onClickDetalleUnidadesMensual(dua.idAutoLinea ,dua.autoLinea, 2, dua.departamentoOri)' [suma-columnas]='dua.febrero'>{{ dua.febrero }}</td>
      <td *ngIf='mes >= "02" && showPercents' [suma-columnas]='dua.febreroPerc' class="text-right">{{ dua.febreroPerc | number:'1.2-2' }}</td>
      <td *ngIf='mes >= "03"' class="text-center" (dblclick)='onClickDetalleUnidadesMensual(dua.idAutoLinea ,dua.autoLinea, 3, dua.departamentoOri)' [suma-columnas]='dua.marzo'>{{ dua.marzo }}</td>
      <td *ngIf='mes >= "03" && showPercents' [suma-columnas]='dua.marzoPerc' class="text-right">{{ dua.marzoPerc | number:'1.2-2' }}</td>
      <td *ngIf='mes >= "04"' class="text-center" (dblclick)='onClickDetalleUnidadesMensual(dua.idAutoLinea ,dua.autoLinea, 4, dua.departamentoOri)' [suma-columnas]='dua.abril'>{{ dua.abril }}</td>
      <td *ngIf='mes >= "04" && showPercents' [suma-columnas]='dua.abrilPerc' class="text-right">{{ dua.abrilPerc | number:'1.2-2' }}</td>
      <td *ngIf='mes >= "05"' class="text-center" (dblclick)='onClickDetalleUnidadesMensual(dua.idAutoLinea ,dua.autoLinea, 5, dua.departamentoOri)' [suma-columnas]='dua.mayo'>{{ dua.mayo }}</td>
      <td *ngIf='mes >= "05" && showPercents' [suma-columnas]='dua.mayoPerc' class="text-right">{{ dua.mayoPerc | number:'1.2-2' }}</td>
      <td *ngIf='mes >= "06"' class="text-center" (dblclick)='onClickDetalleUnidadesMensual(dua.idAutoLinea ,dua.autoLinea, 6, dua.departamentoOri)' [suma-columnas]='dua.junio'>{{ dua.junio }}</td>
      <td *ngIf='mes >= "06" && showPercents' [suma-columnas]='dua.junioPerc' class="text-right">{{ dua.junioPerc | number:'1.2-2' }}</td>
      <td *ngIf='mes >= "07"' class="text-center" (dblclick)='onClickDetalleUnidadesMensual(dua.idAutoLinea ,dua.autoLinea, 7, dua.departamentoOri)' [suma-columnas]='dua.julio'>{{ dua.julio }}</td>
      <td *ngIf='mes >= "07" && showPercents' [suma-columnas]='dua.julioPerc' class="text-right">{{ dua.julioPerc | number:'1.2-2' }}</td>
      <td *ngIf='mes >= "08"' class="text-center" (dblclick)='onClickDetalleUnidadesMensual(dua.idAutoLinea ,dua.autoLinea, 8, dua.departamentoOri)' [suma-columnas]='dua.agosto'>{{ dua.agosto }}</td>
      <td *ngIf='mes >= "08" && showPercents' [suma-columnas]='dua.agostoPerc' class="text-right">{{ dua.agostoPerc | number:'1.2-2' }}</td>
      <td *ngIf='mes >= "09"' class="text-center" (dblclick)='onClickDetalleUnidadesMensual(dua.idAutoLinea ,dua.autoLinea, 9, dua.departamentoOri)' [suma-columnas]='dua.septiembre'>{{ dua.septiembre }}</td>
      <td *ngIf='mes >= "09" && showPercents' [suma-columnas]='dua.septiembrePerc' class="text-right">{{ dua.septiembrePerc | number:'1.2-2' }}</td>
      <td *ngIf='mes >= "10"' class="text-center" (dblclick)='onClickDetalleUnidadesMensual(dua.idAutoLinea ,dua.autoLinea, 10, dua.departamentoOri)' [suma-columnas]='dua.octubre'>{{ dua.octubre }}</td>
      <td *ngIf='mes >= "10" && showPercents' [suma-columnas]='dua.octubrePerc' class="text-right">{{ dua.octubrePerc | number:'1.2-2' }}</td>
      <td *ngIf='mes >= "11"' class="text-center" (dblclick)='onClickDetalleUnidadesMensual(dua.idAutoLinea ,dua.autoLinea, 11, dua.departamentoOri)' [suma-columnas]='dua.noviembre'>{{ dua.noviembre }}</td>
      <td *ngIf='mes >= "11" && showPercents' [suma-columnas]='dua.noviembrePerc' class="text-right">{{ dua.noviembrePerc | number:'1.2-2' }}</td>
      <td *ngIf='mes >= "12"' class="text-center" (dblclick)='onClickDetalleUnidadesMensual(dua.idAutoLinea ,dua.autoLinea, 12, dua.departamentoOri)' [suma-columnas]='dua.diciembre'>{{ dua.diciembre }}</td>
      <td *ngIf='mes >= "12" && showPercents' [suma-columnas]='dua.diciembrePerc' class="text-right">{{ dua.diciembrePerc | number:'1.2-2' }}</td>
      <td class="text-center" [suma-columnas]='dua.totalAnual'>{{ dua.totalAnual }}</td>
      <td *ngIf='showPercents' class="text-right" [suma-columnas]='dua.totalAnualPerc'>{{ dua.totalAnualPerc | number:'1.2-2' }}</td>
      <!-- <td *ngIf='idEstadoResultado === 3' class="text-right">{{ dua.Pct | number:'1.2-2' }}</td> -->
    </tr>
  </tbody>
</table>
